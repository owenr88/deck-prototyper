(this["webpackJsonpdeck-prototyper"]=this["webpackJsonpdeck-prototyper"]||[]).push([[0],{1811:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),c=n(18),i=n.n(c),u=n(26),l=(n(332),n(333),n(334),n(83)),d=n.n(l),s=d.a.primary,f=d.a.secondary,b=[s,f,d.a.lightBlue,d.a.lightOrange,d.a.red,d.a.orange],m={colors:{primary:s,secondary:f,possibleDeckColors:b,gradientColors:[s,d.a.blue,d.a.secondary,f],nav:"rgba(255,255,255,0.1)",navStrong:"rgba(255,255,255,0.5)"},card:{height:"".concat(280,"px"),width:"".concat(200,"px"),margin:"15px"}},p=n(127),g=n(73),v=n(33),h=n(37),E=function(e){return localStorage.setItem("deck-prototyper-cards-data",JSON.stringify(e))},k=function(e){return localStorage.setItem("deck-prototyper-decks-data",JSON.stringify(e))},O=n(62),j=n.n(O),x=o.a.createContext({cards:[],decks:[],fetching:!0,hasImported:!1,getCardDeckNames:function(){return[]},getCardsByDeck:function(){return[]},findDeck:function(){},generateRandomData:function(){},refetchFromLocalStorage:function(){},changeHasImported:function(){},updateDeckField:function(){},updateCardField:function(){},createDeck:function(){},createCard:function(){}}),w=function(e){var t=e.children,n=Object(a.useState)(!0),r=Object(v.a)(n,2),c=r[0],i=r[1],u=Object(a.useState)([]),l=Object(v.a)(u,2),d=l[0],s=l[1],f=Object(a.useState)([]),m=Object(v.a)(f,2),O=m[0],w=m[1],y=Object(a.useState)(!1),C=Object(v.a)(y,2),S=C[0],D=C[1],T=function(){D(function(){var e=localStorage.getItem("deck-prototyper-imported-own-cards");return!!e&&JSON.parse(e)}())},I=function(e){var t;t=e,localStorage.setItem("deck-prototyper-imported-own-cards",JSON.stringify(t)),D(e)};Object(a.useEffect)((function(){P(),T()}),[]);var F=function(e){return O.find((function(t){return t.number===e}))},P=function(){i(!0),w(function(){var e=localStorage.getItem("deck-prototyper-decks-data");return e?JSON.parse(e):[]}()),s(function(){var e=localStorage.getItem("deck-prototyper-cards-data");return e?JSON.parse(e):[]}()),i(!1)};return o.a.createElement(x.Provider,{value:{cards:d,decks:O,fetching:c,hasImported:S,getCardDeckNames:function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.map((function(e){var t,n;return null!==(t=null===(n=F(e))||void 0===n?void 0:n.title)&&void 0!==t?t:""})).filter(Boolean))&&void 0!==t?t:[]},getCardsByDeck:function(e){var t=d.filter((function(t){return e.number in t.decks})).map((function(t){return Object(h.times)(t.decks[e.number],(function(){return t}))}));return Object(h.flatten)(t)},findDeck:F,generateRandomData:function(){i(!0);var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Object(h.times)(e,(function(e){return{number:e+1,title:"Deck ".concat(e+1),description:j.a.lorem.sentence(),color:j.a.random.arrayElement(b)}}))}(5);k(e),w(e);var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return Object(h.times)(e,(function(e){var n={};return Object(h.sampleSize)(t,Object(h.random)(0,t.length)).forEach((function(e){n[e.number]=Object(h.random)(1,2)})),{number:e+1,title:e+": "+j.a.lorem.words(2),body1:j.a.lorem.words(8),body2:j.a.lorem.words(5),decks:n}}))}(20,e);return E(t),s(t),i(!1),I(!1),t},refetchFromLocalStorage:P,changeHasImported:I,updateDeckField:function(e,t,n){var r=O.findIndex((function(t){return t.number===e}));if(-1===r)throw new Error("Deck doesn't exist");O[r]=Object(g.a)({},O[r],Object(p.a)({},t,n)),k(O),P()},updateCardField:function(e,t,n){var r=d.findIndex((function(t){return t.number===e}));if(-1===r)throw new Error("Card doesn't exist");d[r]=Object(g.a)({},d[r],Object(p.a)({},t,n)),E(d),P()},createDeck:function(e){O.push(e),k(O),P()},createCard:function(e){d.push(e),E(d),P()}}},t)},y=x,C=n(104);!function(e){e[e.DECKS=0]="DECKS",e[e.DATA=1]="DATA",e[e.SETTINGS=2]="SETTINGS"}(r||(r={}));var S=o.a.createContext({pages:[],hasPage:function(){return!1},togglePage:function(){}}),D=function(e){var t=e.children,n=Object(a.useState)([]),c=Object(v.a)(n,2),i=c[0],u=c[1],l=function(e){return void 0!==e&&i.includes(e)};return o.a.createElement(S.Provider,{value:{pages:i,hasPage:l,togglePage:function(e){void 0!==e&&r[e]&&(l(e)?u(Object(h.without)(i,e)):u([].concat(Object(C.a)(i),[e])))}}},t)},T=S,I=n(30),F=n(1816),P=n(105),N=n.n(P),A=n(1828),z=n(1829),B=n(1830),$=n(1827),G=n(51),L=n(1812),R=function(){var e=Object(a.useContext)(y),t=e.generateRandomData,n=e.hasImported;return o.a.createElement(G.a,{title:"Generate random data",placement:"top"},n?o.a.createElement(L.a,{title:"Generating random data will override any data you imported already. Are you sure?",onConfirm:function(){return t()},onCancel:function(){},okText:"Yes",cancelText:"No"},o.a.createElement($.a,null)):o.a.createElement($.a,{onClick:function(){return t()}}))};function J(){var e=Object(I.a)(["\n  padding: 20px;\n  flex: 1;\n"]);return J=function(){return e},e}function M(){var e=Object(I.a)(["\n  position: fixed;\n  bottom: 30px;\n  left: auto;\n  right: auto;\n  z-index: 10;\n  display: flex;\n  flex-direction: row;\n  transition: background 1s;\n  background: ",";\n  padding: 0 20px;\n  border-radius: 20px;\n"]);return M=function(){return e},e}var q=u.b.div(M(),(function(e){var t=e.theme;e.open;return t.colors.nav})),H=u.b.div(J()),W=function(){var e=Object(a.useContext)(T),t=e.hasPage,n=e.togglePage;return o.a.createElement(q,{open:t(r.DATA)},o.a.createElement(H,null,o.a.createElement(A.a,{onClick:function(){return n(r.DECKS)}})),o.a.createElement(H,null,o.a.createElement(z.a,{onClick:function(){return n(r.DATA)}})),o.a.createElement(H,null,o.a.createElement(B.a,{onClick:function(){return n(r.SETTINGS)}})),o.a.createElement(H,null,o.a.createElement(R,null)))},K=n(294),V=n.n(K),U=n(1820),Y=function(e){var t="rgba(0, 0, 0, 0.85)";return N.a.contrast(e,t)>4.5?t:"#FFFFFF"},_=n(326),Q=n(1819);function X(){var e=Object(I.a)(["\n  ",";\n"]);return X=function(){return e},e}function Z(){var e=Object(I.a)(["\n  height: ",";\n  width: ",";\n  margin: ",";\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return Z=function(){return e},e}var ee=Object(u.b)(Q.a)(Z(),(function(e){return e.theme.card.height}),(function(e){return e.theme.card.width}),(function(e){return e.theme.card.margin})),te=Object(u.b)(U.a.Title)(X(),(function(e){return e.color&&"color: "+e.color+"!important"})),ne=function(e){var t=e.children,n=e.title,r=e.textColor,a=Object(_.a)(e,["children","title","textColor"]);return o.a.createElement(ee,Object.assign({bordered:!1},a),o.a.createElement(te,{level:4,color:r},n),t)},re=n(42);function ae(){var e=Object(I.a)(["\n  background: rgba(255, 255, 255, 0.3);\n  z-index: ",";\n  ",";\n"]);return ae=function(){return e},e}var oe=Object(u.b)(ne)(ae(),(function(e){return e.$marginTop<0?-2:0}),(function(e){return e.$marginTop<0?"margin-top: ".concat(e.$marginTop,"px"):""})),ce=function(e){var t=e.title,n=e.onReshuffle,r=e.marginTop;return o.a.createElement(oe,{title:t||"No cards",$marginTop:r},!!n&&o.a.createElement(o.a.Fragment,null,o.a.createElement(re.a,{type:"primary",onClick:function(){return n()}},"Reshuffle?")))};function ie(){var e=Object(I.a)(["\n  color: ",";\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  font-size: 14px;\n"]);return ie=function(){return e},e}function ue(){var e=Object(I.a)(["\n  background: ",";\n  cursor: pointer;\n  border: 2px solid #f9fbef;\n"]);return ue=function(){return e},e}var le=Object(u.b)(ne)(ue(),(function(e){var t;return(null===(t=e.deck)||void 0===t?void 0:t.color)||"#f9fbef"})),de=Object(u.b)(U.a.Paragraph)(ie(),(function(e){return e.$textColor})),se=function(e){var t,n=e.deck,r=e.onClick,c=e.numberOfCards,i=Object(a.useContext)(y).getCardsByDeck;if(!c&&n){var u=i(n);return o.a.createElement(ce,{title:"Deck Empty",onReshuffle:u.length?r:void 0})}var l=Y((null===n||void 0===n?void 0:n.color)||"#FFFFFF");return o.a.createElement(le,{deck:n,title:null!==(t=null===n||void 0===n?void 0:n.title)&&void 0!==t?t:"",onClick:function(){return r()},textColor:l},!!(null===n||void 0===n?void 0:n.description)&&o.a.createElement(de,{$textColor:l},n.description))};function fe(){var e=Object(I.a)(["\n  font-size: 14px;\n"]);return fe=function(){return e},e}function be(){var e=Object(I.a)(["\n  color: rgba(0, 0, 0, 0.3);\n  position: absolute;\n  top: 5px;\n  right: 5px;\n"]);return be=function(){return e},e}function me(){var e=Object(I.a)(["\n  background: #f9fbef;\n  z-index: 2;\n  ",";\n"]);return me=function(){return e},e}var pe=Object(u.b)(ne)(me(),(function(e){return e.$marginTop<0?"margin-top: ".concat(e.$marginTop,"px"):""})),ge=Object(u.b)(U.a.Text)(be()),ve=Object(u.b)(U.a.Paragraph)(fe()),he=function(e){var t,n=e.card,r=e.marginTop;return n?o.a.createElement(pe,{title:null!==(t=null===n||void 0===n?void 0:n.title)&&void 0!==t?t:"",$marginTop:r},o.a.createElement(ge,null,"#",null===n||void 0===n?void 0:n.number),(null===n||void 0===n?void 0:n.body1)&&o.a.createElement(ve,null,null===n||void 0===n?void 0:n.body1),(null===n||void 0===n?void 0:n.body2)&&o.a.createElement(ve,null,null===n||void 0===n?void 0:n.body2)):o.a.createElement(ce,{title:"None discarded",marginTop:r})},Ee=function(){var e=Object(a.useState)(window.innerHeight),t=Object(v.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(){window.innerHeight!==n&&r(window.innerHeight)}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[n]),n},ke=function(){var e=Object(a.useState)(window.innerWidth),t=Object(v.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){function e(){window.innerWidth!==n&&r(window.innerWidth)}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[n]),n};function Oe(){var e=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Oe=function(){return e},e}function je(){var e=Object(I.a)(["\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  position: absolute;\n  top: -5px;\n  font-size: 11px;\n"]);return je=function(){return e},e}var xe=Object(u.b)(U.a.Text)(je()),we=u.b.div(Oe()),ye=function(e){var t=e.deck,n=Object(a.useContext)(y),r=n.cards,c=n.getCardsByDeck,i=Ee(),u=Object(a.useState)(0),l=Object(v.a)(u,2),d=l[0],s=l[1],f=Object(a.useState)([]),b=Object(v.a)(f,2),m=b[0],p=b[1],g=Object(a.useState)([]),E=Object(v.a)(g,2),k=E[0],O=E[1],j=Object(a.useCallback)((function(){var e=c(t);p(e),O([])}),[t,c]);Object(a.useEffect)((function(){j()}),[r,t.number,j]);return Object(a.useEffect)((function(){var e,t,n=i-100-60;if(!(n>=560)){var r=n-560,a=null!==(e=Object(h.min)([r,-50]))&&void 0!==e?e:d,o=null!==(t=Object(h.max)([a,-120]))&&void 0!==t?t:d;o!==d&&s(o)}}),[d,i]),o.a.createElement(we,null,k.length?o.a.createElement(xe,null,m.length,"/",m.length+k.length," - ",o.a.createElement("a",{onClick:j,href:"#"},"reshuffle"),"?"):o.a.createElement(xe,null,m.length," in deck"),o.a.createElement(se,{deck:t,onClick:function(){if(m.length){var e=Object(C.a)(m),t=Object(h.random)(0,e.length),n=e.splice(t,1);n.length&&(p(e),O([].concat(Object(C.a)(k),[n[0]])))}else j()},numberOfCards:m.length}),o.a.createElement(he,{card:Object(h.last)(k),marginTop:d}))};function Ce(){var e=Object(I.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return Ce=function(){return e},e}var Se=u.b.div(Ce()),De=function(){var e=Object(a.useContext)(T).togglePage;return o.a.createElement(Se,null,o.a.createElement(U.a.Title,{level:3},"Welcome to Deck Prototyper"," ",o.a.createElement("span",{role:"img","aria-label":"wave"},"\ud83d\udc4b")),o.a.createElement(U.a.Paragraph,null,"This tool has been designed to quickly create and use decks of cards for prototyping your new table top game."),o.a.createElement(U.a.Paragraph,null,"Click"," ",o.a.createElement(B.a,{onClick:function(){return e(r.SETTINGS)}})," to upload a CSV of your cards, or ",o.a.createElement(R,null)," to generate some random decks to get started."))};function Te(){var e=Object(I.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]);return Te=function(){return e},e}var Ie=Object(u.b)(V.a)(Te()),Fe=function(){var e=Object(a.useContext)(y).decks,t=ke(),n=Object(a.useState)(3),r=Object(v.a)(n,2),c=r[0],i=r[1];Object(a.useEffect)((function(){var n=t-100,r=e.length,a=Math.floor(n/230),o=Object(h.min)([r,a]);o&&o!==c&&i(o)}),[e.length,c,t]);var u={infinite:!1,dots:!1,speed:500,autoplay:!1,slidesToShow:c,slidesToScroll:c,initialSlide:0};return e.length?o.a.createElement(Ie,u,e.map((function(e){return o.a.createElement(ye,{deck:e,key:"deck"+e.number})}))):o.a.createElement(De,null)},Pe=n(1825),Ne=n(1823),Ae=n(324),ze=n(1822),Be=n(1824),$e=n(1831),Ge=n(302);function Le(){var e=Object(I.a)(["\n  &:hover "," {\n    opacity: 1;\n  }\n"]);return Le=function(){return e},e}function Re(){var e=Object(I.a)(["\n  z-index: 2;\n  position: absolute;\n  top: 30px;\n  right: -12px;\n"]);return Re=function(){return e},e}function Je(){var e=Object(I.a)(["\n  width: 17px;\n  height: 17px;\n  border-radius: 50%;\n  cursor: pointer;\n  background-color: transparent;\n  transition: 0.2s opacity;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-content: center;\n  opacity: ",";\n  background-color: ",";\n"]);return Je=function(){return e},e}function Me(){var e=Object(I.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n"]);return Me=function(){return e},e}var qe=u.b.div(Me()),He=u.b.div(Je(),(function(e){return e.clicked?1:0}),(function(e){return e.dotColor})),We=u.b.div(Re()),Ke=Object(u.b)(Pe.b.Item)(Le(),He),Ve=function(e){var t,n,r=e.deck,c=e.numberColorPicker,i=e.toggleNumberColorPicker,u=Object(a.useState)(!1),l=Object(v.a)(u,2),d=l[0],s=l[1],f=Object(a.useContext)(y),m=f.updateDeckField,p=(0,f.getCardsByDeck)(r);return Object(a.useEffect)((function(){c!==r.number&&s(!1)}),[r.number,c]),o.a.createElement(Ke,null,o.a.createElement(Pe.b.Item.Meta,{title:o.a.createElement(U.a.Title,{level:4,editable:{onChange:function(e){return m(r.number,"title",e)}}},r.title),description:o.a.createElement(U.a.Text,{editable:{onChange:function(e){return m(r.number,"description",e)}}},r.description||"No description"),avatar:o.a.createElement(Ne.a,{style:{backgroundColor:r.color}},p.length)}),o.a.createElement(qe,null,o.a.createElement(He,{dotColor:null!==(t=r.color)&&void 0!==t?t:"white",clicked:d,onClick:function(){s(!0),i(r.number)}}),c===r.number&&o.a.createElement(We,null,o.a.createElement(Ge.TwitterPicker,{color:null!==(n=r.color)&&void 0!==n?n:"white",colors:b,triangle:"top-right",width:"245px",onChange:function(e){s(!1),i(r.number),m(r.number,"color",e.hex)}}))))},Ue=function(){var e=ke(),t=Object(a.useContext)(T),n=t.pages,c=t.hasPage,i=t.togglePage,u=Object(a.useContext)(y),l=u.decks,d=u.createDeck,s=Object(a.useState)(null),f=Object(v.a)(s,2),m=f[0],p=f[1],g=Object(a.useState)(""),h=Object(v.a)(g,2),E=h[0],k=h[1],O=function(e){p(m===e?null:e)};return o.a.createElement(ze.a,{title:"Decks",placement:"left",width:e<680?"95%":"40%",closable:!0,visible:c(r.DECKS),onClose:function(){return i(r.DECKS)},maskClosable:!1,mask:n.length<2},o.a.createElement(Pe.b,{dataSource:l,renderItem:function(e){return o.a.createElement(Ve,{deck:e,numberColorPicker:m,toggleNumberColorPicker:O})},footer:o.a.createElement(Be.a,{value:E,onChange:function(e){return k(e.target.value)},placeholder:"Add new deck",addonAfter:o.a.createElement($e.a,null),onPressEnter:function(e){e.preventDefault();var t=E;t?(d({number:l.length+1,title:t,color:j.a.random.arrayElement(b),description:""}),k("")):Ae.b.error("Please input a deck name first")}})}))},Ye=n(1826),_e=n(1817),Qe=n(1832),Xe=n(1833);function Ze(){var e=Object(I.a)(["\n  width: 200px;\n  float: right;\n  margin-bottom: 15px;\n"]);return Ze=function(){return e},e}function et(){var e=Object(I.a)(["\n  clear: both;\n  float: left;\n  margin-bottom: 5px;\n  color: ",";\n\n  .ant-tag-close-icon {\n    font-size: 12px;\n    margin-left: 7px;\n    color: ",";\n  }\n"]);return et=function(){return e},e}var tt=Object(u.b)(Ye.a)(et(),(function(e){return e.$textColor}),(function(e){return e.$textColor})),nt=Object(u.b)(Be.a.Search)(Ze()),rt=function(){var e=Object(a.useState)(""),t=Object(v.a)(e,2),n=t[0],c=t[1],i=Object(a.useContext)(y),u=i.cards,l=i.decks,d=i.updateCardField,s=Object(a.useContext)(T),f=s.pages,b=s.hasPage,m=s.togglePage,p=[{title:"ID",dataIndex:"number",render:function(e){return"#".concat(e.toString())}},{title:"title",dataIndex:"title",render:function(e,t){return o.a.createElement(U.a.Text,{editable:{onChange:function(e){return d(t.number,"title",e)}}},e)}},{title:"Body 1",dataIndex:"body1",render:function(e,t){return o.a.createElement(U.a.Text,{editable:{onChange:function(e){return d(t.number,"body1",e)}}},e)}},{title:"Body 2",dataIndex:"body2",render:function(e,t){return o.a.createElement(U.a.Text,{editable:{onChange:function(e){return d(t.number,"body2",e)}}},e)}},{title:"Decks",dataIndex:"decks",render:function(e,t){return o.a.createElement(o.a.Fragment,null,l.map((function(e){var n;if(!e.title)return null;var r=Y(e.color),a=null!==(n=t.decks[e.number])&&void 0!==n?n:0;return o.a.createElement(tt,{icon:o.a.createElement(Qe.a,{onClick:function(n){return function(e,t,n){e.preventDefault();var r=Object(g.a)({},t.decks);r[n.number]&&1!==r[n.number]?r[n.number]=r[n.number]-1:delete r[n.number],d(t.number,"decks",r)}(n,t,e)}}),closeIcon:o.a.createElement(Xe.a,{color:"white"}),color:null===e||void 0===e?void 0:e.color,$textColor:r,key:t.number+"tag"+(null===e||void 0===e?void 0:e.number),closable:!0,onClose:function(n){return function(e,t,n){e.preventDefault();var r=Object(g.a)({},t.decks);r[n.number]&&0!==r[n.number]?r[n.number]=r[n.number]+1:r[n.number]=1,d(t.number,"decks",r)}(n,t,e)}},e.title.toUpperCase()," (",a,")")})))}}],h=u.filter((function(e){var t,r,a,o,c;if(!e)return!1;if(!n)return!0;var i=new RegExp(n,"ig");return i.test(null!==(t=e.number.toString())&&void 0!==t?t:"")||i.test(null!==(r="#"+e.number.toString())&&void 0!==r?r:"")||i.test(null!==(a=e.title)&&void 0!==a?a:"")||i.test(null!==(o=e.body1)&&void 0!==o?o:"")||i.test(null!==(c=e.body2)&&void 0!==c?c:"")}));return o.a.createElement(ze.a,{title:"Cards",placement:"right",width:"95%",closable:!0,visible:b(r.DATA),onClose:function(){return m(r.DATA)},maskClosable:!1,mask:f.length<2},o.a.createElement(nt,{placeholder:"Search cards",onSearch:function(e){return c(e)},allowClear:!0}),o.a.createElement("div",{style:{clear:"both"}}),o.a.createElement(_e.a,{columns:p,dataSource:h}))},at=n(66),ot=n.n(at),ct=n(103),it=n(1821),ut=n(1818),lt=n(1815),dt=n(1834),st=n(178),ft=n.n(st),bt=["number","title","body1","body2","decks"],mt=["number","title"],pt=function(e){return new Promise((function(t,n){ft.a.parse(e,{skipEmptyLines:!0,header:!0,complete:t,error:n})}))},gt=function(e){if(!e||!e.data)throw new Error("No data in the file");var t=e.meta.fields,n=h.without.apply(void 0,[bt].concat(Object(C.a)(t)));if(n.length)throw new Error("Missing the following fields: ".concat(n.join(", ")));return e.data.forEach((function(e){mt.forEach((function(t){var n;if(null===(n=e[t])||void 0===n||!n)throw new Error("Missing any content for the '".concat(t,"' field on one of the rows"))}))})),e},vt=function(e){return e.map((function(e){var t,n,r;return{number:parseInt(e.number),title:e.title,body1:null!==(t=e.body1)&&void 0!==t?t:"",body2:null!==(n=e.body2)&&void 0!==n?n:"",decks:(null!==(r=e.decks)&&void 0!==r?r:"").split(",").filter(Boolean)}}))},ht=function(e){var t=e.map((function(e){return e.number}));if(Object(h.uniq)(t).length!==t.length)throw new Error("Each row does not have its own unqiue number")},Et=function(){var e=Object(a.useContext)(y),t=e.refetchFromLocalStorage,n=e.changeHasImported,r=Object(a.useState)(!1),o=Object(v.a)(r,2),c=o[0],i=o[1],u=function(e){var t=e.reduce((function(e,t){return t.decks.forEach((function(t){var n=t.split("|")[0];e.includes(n)||e.push(n)})),e}),[]),n=[],r=[];return t.forEach((function(e,t){var a=j.a.random.arrayElement(h.without.apply(void 0,[b].concat(r)));r.push(a),n.push({number:t+1,title:e,description:"",color:a})})),n},l=function(e,t){var n=t.map((function(t){var n={};return t.decks.forEach((function(t){if(t){var r=t.split("|"),a=Object(v.a)(r,2),o=a[0],c=a[1],i=void 0===c?1:c,u=e.find((function(e){return e.title===o}));u&&(n[u.number]=parseInt(i))}})),Object(g.a)({},t,{decks:n})}));E(n),k(e)};return{importFile:function(){var e=Object(ct.a)(ot.a.mark((function e(r){var a,o,c,d;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.prev=1,e.next=4,pt(r);case 4:a=e.sent,o=gt(a),c=vt(o.data),ht(c),d=u(c),l(d,c),t(),n(!0),i(!1),e.next=20;break;case 15:throw e.prev=15,e.t0=e.catch(1),console.error(e.t0),i(!1),e.t0;case 20:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),importing:c}},kt=function(e,t){return Object.keys(e).map((function(n){var r=e[parseInt(n)],a=t([parseInt(n)]),o=Object(v.a)(a,1)[0];return o?"".concat(o,"|").concat(r):""})).filter(Boolean).join(",")},Ot=function(){var e=Object(a.useContext)(y),t=e.cards,n=e.getCardDeckNames,r=Object(a.useState)(!1),o=Object(v.a)(r,2),c=o[0],i=o[1];return{exportData:function(){var e=Object(ct.a)(ot.a.mark((function e(){var r,a;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(!0),r=ft.a.unparse(t.map((function(e){return Object(g.a)({},e,{decks:kt(e.decks,n)})}))),"data:text/csv;charset=utf-8,",a=encodeURI("data:text/csv;charset=utf-8,"+r),window.open(a),i(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),exporting:c}};function jt(){var e=Object(I.a)(["\n  text-align: center;\n  margin-bottom: 0;\n"]);return jt=function(){return e},e}var xt=Object(u.b)(U.a.Paragraph)(jt()),wt=function(){var e=Object(a.useContext)(T),t=e.hasPage,n=e.togglePage,c=Et().importFile,i=Ot().exportData,u=Object(a.useState)(!1),l=Object(v.a)(u,2),d=l[0],s=l[1],f=function(){var e=Object(ct.a)(ot.a.mark((function e(t){return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,i();case 4:return Ae.b.success("Settings exported successfully."),e.abrupt("return",!1);case 8:return e.prev=8,e.t0=e.catch(1),Ae.b.error(e.t0.message),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(ct.a)(ot.a.mark((function e(t){return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(t.file);case 3:Ae.b.success("File imported"),t.onSuccess("ok"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),Ae.b.error(e.t0.message),t.onError(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(it.a,{title:"Import/Export data",visible:t(r.SETTINGS),onOk:function(){return n(r.SETTINGS)},onCancel:function(){return n(r.SETTINGS)},footer:o.a.createElement(xt,null,"Made with"," ",o.a.createElement("span",{role:"img","aria-label":"heart"},"\u2665\ufe0f")," ","by"," ",o.a.createElement("a",{target:"_blank",href:"https://github.com/owenr88",rel:"noopener noreferrer"},"Owen"))},o.a.createElement(ut.a.Dragger,{accept:".csv",name:"file",multiple:!1,customRequest:b,showUploadList:!1},o.a.createElement("p",{className:"ant-upload-drag-icon"},o.a.createElement(dt.a,null)),o.a.createElement("p",{className:"ant-upload-text"},"Click or drag a file to this area to upload it"),o.a.createElement("p",{className:"ant-upload-hint"},"CSV supported only. See the link below for a template of how to format the CSV.")),o.a.createElement(U.a.Paragraph,{style:{marginTop:24}},"Download the"," ",o.a.createElement("a",{href:"/deck-prototyper/sample.csv",download:"deck-prototyper-sample"},"sample CSV")," ","file to get a feel for the data structure."," ",o.a.createElement("a",{href:"#",onClick:function(){return s(!0)}},"More info")),d&&o.a.createElement(o.a.Fragment,null,o.a.createElement(U.a.Paragraph,null,"* Only the number (card ID) and title are required to be filled for each card, but all fields must be present."),o.a.createElement(U.a.Paragraph,null,"* The number (card ID) must be unique for every card/row."),o.a.createElement(U.a.Paragraph,null,'* The decks field is a comma separated list of deck names, which can use an optional pipe ("|") to define the total number of this card included in a deck. For example a \'decks\' field with "Action Deck|4" will mean that 4 of that card will be inserted into the "Action Deck". See the sample CSV above as an example.')),o.a.createElement(lt.a,null),o.a.createElement(U.a.Paragraph,null,"You can re-import your exported settings at any time. All your data is stored locally in your browser, not on a remote server."," ",o.a.createElement("b",null,"If you clear your cookies or site settings you will lose your data, so make sure have a back up.")),o.a.createElement(re.a,{type:"primary",onClick:f},"Export data"))};function yt(){var e=Object(I.a)(["\n  padding: 50px;\n  text-align: center;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-content: center;\n"]);return yt=function(){return e},e}function Ct(){var e=Object(I.a)(["\n  min-height: 100vh;\n  ","\n"]);return Ct=function(){return e},e}var St=Object(u.b)(F.a)(Ct(),(function(e){var t=e.theme.colors.gradientColors,n=N()(t[0]).rgb().join(","),r=N()(t[1]).rgb().join(","),a=N()(t[2]).rgb().join(","),o=N()(t[3]).rgb().join(",");return"\n    background:\n      -webkit-linear-gradient(315deg, rgba(".concat(n,", 1) 0%, rgba(").concat(n,", 0) 70%),\n      -webkit-linear-gradient(65deg, rgba(").concat(r,", 1) 10%, rgba(").concat(r,", 0) 80%),\n      -webkit-linear-gradient(135deg, rgba(").concat(a,", 1) 15%, rgba(").concat(a,", 0) 80%),\n      -webkit-linear-gradient(205deg, rgba(").concat(o,", 1) 100%, rgba(").concat(o,", 0) 70%);\n    background:\n      linear-gradient(315deg, rgba(").concat(n,", 1) 0%, rgba(").concat(n,", 0) 70%),\n      linear-gradient(65deg, rgba(").concat(r,", 1) 10%, rgba(").concat(r,", 0) 80%),\n      linear-gradient(135deg, rgba(").concat(a,", 1) 15%, rgba(").concat(a,", 0) 80%),\n      linear-gradient(205deg, rgba(").concat(o,", 1) 100%, rgba(").concat(o,", 0) 70%);\n    ")})),Dt=Object(u.b)(F.a.Content)(yt());var Tt=function(){return o.a.createElement(St,null,o.a.createElement(Dt,null,o.a.createElement(W,null),o.a.createElement(Fe,null),o.a.createElement(Ue,null),o.a.createElement(rt,null),o.a.createElement(wt,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(u.a,{theme:m},o.a.createElement(w,null,o.a.createElement(D,null,o.a.createElement(Tt,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},327:function(e,t,n){e.exports=n(1811)},332:function(e,t,n){},83:function(e,t){e.exports={primary:"#07d514",secondary:"#098BE1",lightBlue:"#01c4d6",blue:"#0485F7",lightOrange:"#FFC200",orange:"#FF9500",red:"#FF4F00"}}},[[327,1,2]]]);
//# sourceMappingURL=main.6cf2a7d5.chunk.js.map